###############################################################################
# LOCALHOST.CFG - Monitoring the local host
###############################################################################

# Define a host for the local machine
define host {
    use                     linux-server
    host_name               localhost
    alias                   SMS App Server
    address                 127.0.0.1
}

# Define a hostgroup for Linux machines
define hostgroup {
    hostgroup_name          linux-servers
    alias                   Linux Servers
    members                 localhost
}

# Service: PING
define service {
    use                     local-service
    host_name               localhost
    service_description     PING
    check_command           check_ping!100.0,20%!500.0,60%
}

# Service: Root Partition
define service {
    use                     local-service
    host_name               localhost
    service_description     Root Partition
    check_command           check_local_disk!20%!10%!/
}

# Service: Current Users
define service {
    use                     local-service
    host_name               localhost
    service_description     Current Users
    check_command           check_local_users!20!50
}

# Service: Total Processes
define service {
    use                     local-service
    host_name               localhost
    service_description     Total Processes
    check_command           check_local_procs!250!400!RSZDT
}

# Service: Current Load
define service {
    use                     local-service
    host_name               localhost
    service_description     Current Load
    check_command           check_local_load!5.0,4.0,3.0!10.0,6.0,4.0
}

# Service: Swap Usage - DISABLED (No swap configured on this system)
# define service {
#     use                     local-service
#     host_name               localhost
#     service_description     Swap Usage
#     check_command           check_local_swap!20%!10%
# }

# Service: SSH
define service {
    use                     local-service
    host_name               localhost
    service_description     SSH
    check_command           check_ssh
    notifications_enabled   0
}

# Service: HTTP
define service {
    use                     local-service
    host_name               localhost
    service_description     HTTP
    check_command           check_http
}

# Service: Backend API (Port 8080)
define service {
    use                     local-service
    host_name               localhost
    service_description     Backend API
    check_command           check_http!-p 8080 -u /
}

# Service: Frontend (Port 5173)
define service {
    use                     local-service
    host_name               localhost
    service_description     Frontend App
    check_command           check_http!-p 5173
}

# Service: Docker Backend Container
define service {
    use                     local-service
    host_name               localhost
    service_description     Docker Backend Container
    check_command           check_docker_container!sms-backend-1
}

# Service: Docker Frontend Container
define service {
    use                     local-service
    host_name               localhost
    service_description     Docker Frontend Container
    check_command           check_docker_container!sms-frontend-1
}

# Define command to check Docker containers
define command {
    command_name            check_docker_container
    command_line            /usr/local/nagios/libexec/check_docker.sh $ARG1$
}
